{"ast":null,"code":"import { RetailSellerProductsDialogComponent } from \"./retail-seller-products-dialog/retail-seller-products-dialog.component\";\nimport { RetailSellerProductsDialogDeleteComponent } from \"./retail-seller-products-dialog-delete/retail-seller-products-dialog-delete.component\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/cdk/layout\";\nimport * as i2 from \"../../services/products/products.service\";\nimport * as i3 from \"../../services/wholesalers/wholesalers.service\";\nimport * as i4 from \"@angular/material/dialog\";\nimport * as i5 from \"../../services/retail-sellers/retail-sellers.service\";\nimport * as i6 from \"@angular/router\";\nimport * as i7 from \"../../sender.service\";\nimport * as i8 from \"ngx-toastr\";\nimport * as i9 from \"../retail-seller-navbar/retail-seller-navbar.component\";\nimport * as i10 from \"@angular/material/form-field\";\nimport * as i11 from \"@angular/material/input\";\nimport * as i12 from \"@angular/forms\";\nimport * as i13 from \"@angular/material/grid-list\";\nimport * as i14 from \"@angular/common\";\nimport * as i15 from \"@angular/material/card\";\nimport * as i16 from \"@angular/material/slider\";\nimport * as i17 from \"@angular/material/slide-toggle\";\nimport * as i18 from \"@angular/material/button\";\nimport * as i19 from \"../../tools/filter.pipe\";\n\nfunction RetailSellerProductsComponent_mat_grid_tile_13_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"p\")(2, \"span\")(3, \"strong\");\n    i0.ɵɵtext(4, \"Vendedor:\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const product_r1 = i0.ɵɵnextContext().$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.wholesalersData[ctx_r2.productsData.indexOf(product_r1)].firstName, \"\");\n  }\n}\n\nfunction RetailSellerProductsComponent_mat_grid_tile_13_button_47_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 26);\n    i0.ɵɵlistener(\"click\", function RetailSellerProductsComponent_mat_grid_tile_13_button_47_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const product_r1 = i0.ɵɵnextContext().$implicit;\n      const ctx_r6 = i0.ɵɵnextContext();\n      return ctx_r6.openDialogDeleteOfCar(product_r1, ctx_r6.sliderValue[ctx_r6.productsData.indexOf(product_r1)], ctx_r6.productsData.indexOf(product_r1));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const product_r1 = i0.ɵɵnextContext().$implicit;\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"disabled\", ctx_r3.sliderValue[ctx_r3.productsData.indexOf(product_r1)] > 0 ? false : true);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"Delete \", ctx_r3.sliderValue[ctx_r3.productsData.indexOf(product_r1)], \" products\");\n  }\n}\n\nfunction RetailSellerProductsComponent_mat_grid_tile_13_button_48_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 27);\n    i0.ɵɵlistener(\"click\", function RetailSellerProductsComponent_mat_grid_tile_13_button_48_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const product_r1 = i0.ɵɵnextContext().$implicit;\n      const ctx_r10 = i0.ɵɵnextContext();\n      return ctx_r10.openDialogAddToCar(product_r1, ctx_r10.sliderValue[ctx_r10.productsData.indexOf(product_r1)], ctx_r10.productsData.indexOf(product_r1));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const product_r1 = i0.ɵɵnextContext().$implicit;\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"disabled\", ctx_r4.sliderValue[ctx_r4.productsData.indexOf(product_r1)] > 0 ? false : true);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"Add \", ctx_r4.sliderValue[ctx_r4.productsData.indexOf(product_r1)], \" products\");\n  }\n}\n\nfunction RetailSellerProductsComponent_mat_grid_tile_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"mat-grid-tile\")(1, \"mat-card\", 11)(2, \"mat-card-header\")(3, \"mat-card-title\", 12);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"mat-card-content\", 13)(6, \"div\", 14)(7, \"div\")(8, \"p\")(9, \"span\")(10, \"strong\");\n    i0.ɵɵtext(11, \"Descripcion del producto:\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(13, RetailSellerProductsComponent_mat_grid_tile_13_div_13_Template, 6, 1, \"div\", 15);\n    i0.ɵɵelementStart(14, \"div\")(15, \"p\")(16, \"span\")(17, \"strong\");\n    i0.ɵɵtext(18, \"Unit Price:\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtext(19);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(20, \"div\")(21, \"p\")(22, \"span\")(23, \"strong\");\n    i0.ɵɵtext(24, \"Selected Price:\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtext(25);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(26, \"div\")(27, \"p\")(28, \"span\")(29, \"strong\");\n    i0.ɵɵtext(30, \"Products Added:\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtext(31);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(32, \"div\", 16)(33, \"div\", 17)(34, \"mat-form-field\", 18)(35, \"mat-label\");\n    i0.ɵɵtext(36, \"Value\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(37, \"input\", 19);\n    i0.ɵɵlistener(\"ngModelChange\", function RetailSellerProductsComponent_mat_grid_tile_13_Template_input_ngModelChange_37_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r15);\n      const product_r1 = restoredCtx.$implicit;\n      const ctx_r14 = i0.ɵɵnextContext();\n      return ctx_r14.sliderValue[ctx_r14.productsData.indexOf(product_r1)] = $event;\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(38, \"div\", 20)(39, \"mat-slider\", 21);\n    i0.ɵɵlistener(\"ngModelChange\", function RetailSellerProductsComponent_mat_grid_tile_13_Template_mat_slider_ngModelChange_39_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r15);\n      const product_r1 = restoredCtx.$implicit;\n      const ctx_r16 = i0.ɵɵnextContext();\n      return ctx_r16.sliderValue[ctx_r16.productsData.indexOf(product_r1)] = $event;\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelement(40, \"br\");\n    i0.ɵɵelementStart(41, \"mat-slide-toggle\", 22);\n    i0.ɵɵlistener(\"change\", function RetailSellerProductsComponent_mat_grid_tile_13_Template_mat_slide_toggle_change_41_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r15);\n      const product_r1 = restoredCtx.$implicit;\n      const ctx_r17 = i0.ɵɵnextContext();\n      return ctx_r17.slideToggleChange($event, product_r1, ctx_r17.productsData.indexOf(product_r1));\n    })(\"ngModelChange\", function RetailSellerProductsComponent_mat_grid_tile_13_Template_mat_slide_toggle_ngModelChange_41_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r15);\n      const product_r1 = restoredCtx.$implicit;\n      const ctx_r18 = i0.ɵɵnextContext();\n      return ctx_r18.isSliderToggleChecked[ctx_r18.productsData.indexOf(product_r1)] = $event;\n    });\n    i0.ɵɵtext(42);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(43, \"br\")(44, \"br\")(45, \"br\");\n    i0.ɵɵelementStart(46, \"div\", 23);\n    i0.ɵɵtemplate(47, RetailSellerProductsComponent_mat_grid_tile_13_button_47_Template, 2, 2, \"button\", 24);\n    i0.ɵɵtemplate(48, RetailSellerProductsComponent_mat_grid_tile_13_button_48_Template, 2, 2, \"button\", 25);\n    i0.ɵɵelementEnd()()()();\n  }\n\n  if (rf & 2) {\n    const product_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", product_r1.name, \" \");\n    i0.ɵɵadvance(8);\n    i0.ɵɵtextInterpolate1(\" \", product_r1.description, \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.wholesalersData[ctx_r0.productsData.indexOf(product_r1)]);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\" $/.\", product_r1.price, \"\");\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\" $/.\", product_r1.price * ctx_r0.sliderValue[ctx_r0.productsData.indexOf(product_r1)], \"\");\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate2(\" \", ctx_r0.productsQuantity[ctx_r0.productsData.indexOf(product_r1)], \" (S/.\", ctx_r0.productsQuantity[ctx_r0.productsData.indexOf(product_r1)] * product_r1.price, \")\");\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.sliderValue[ctx_r0.productsData.indexOf(product_r1)]);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.sliderValue[ctx_r0.productsData.indexOf(product_r1)])(\"color\", ctx_r0.isSliderToggleChecked[ctx_r0.productsData.indexOf(product_r1)] ? \"primary\" : \"warn\")(\"max\", ctx_r0.isSliderToggleChecked[ctx_r0.productsData.indexOf(product_r1)] ? 100 : ctx_r0.productsQuantity[ctx_r0.productsData.indexOf(product_r1)]);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.isSliderToggleChecked[ctx_r0.productsData.indexOf(product_r1)]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.isSliderToggleChecked[ctx_r0.productsData.indexOf(product_r1)] ? \"Add Products\" : \"Delete Products\", \"\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.isSliderToggleChecked[ctx_r0.productsData.indexOf(product_r1)]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isSliderToggleChecked[ctx_r0.productsData.indexOf(product_r1)]);\n  }\n}\n\nexport let RetailSellerProductsComponent = /*#__PURE__*/(() => {\n  class RetailSellerProductsComponent {\n    constructor(breakPointObserver, productsService, wholesalersService, dialog, retailSellersService, route, senderService, toastr) {\n      this.breakPointObserver = breakPointObserver;\n      this.productsService = productsService;\n      this.wholesalersService = wholesalersService;\n      this.dialog = dialog;\n      this.retailSellersService = retailSellersService;\n      this.route = route;\n      this.senderService = senderService;\n      this.toastr = toastr;\n      this.searchKey = '';\n      this.sliderValue = [];\n      this.productsData = [];\n      this.wholesalersData = [];\n      this.id = this.route.snapshot.paramMap.get('id');\n      this.retailSellerActual = {};\n      this.isSliderToggleChecked = [];\n      this.productsQuantity = [];\n    }\n\n    ngOnInit() {\n      this.productsService.getAll().subscribe(response => {\n        this.productsData = response;\n\n        for (let product of this.productsData) {\n          this.sliderValue.push(1);\n          this.isSliderToggleChecked.push(true);\n\n          if (this.senderService.shoppingCarOrders.find(x => x.productId == product.id)) {\n            this.productsQuantity.push(this.senderService.shoppingCarOrders.find(x => x.productId == product.id).quantity);\n          } else {\n            this.productsQuantity.push(0);\n          }\n\n          this.wholesalersService.getById(product.wholesalerId).subscribe(response2 => {\n            this.wholesalersData.push(response2);\n          });\n        }\n      });\n    }\n\n    ngAfterViewInit() {}\n\n    openDialogAddToCar(data, quantity, index) {\n      const dialogRef = this.dialog.open(RetailSellerProductsDialogComponent, {\n        data: {\n          product: data,\n          quantity: quantity\n        }\n      });\n      dialogRef.afterClosed().subscribe(result => {\n        if (result != undefined) {\n          if (this.senderService.shoppingCarOrders.find(x => x.productId == result.product.id)) {\n            this.productsQuantity[index] = this.senderService.shoppingCarOrders.find(x => x.productId == result.product.id).quantity += result.quantity;\n          } else {\n            this.senderService.shoppingCarOrders.push({\n              productId: result.product.id,\n              quantity: result.quantity\n            });\n            this.productsQuantity[index] = result.quantity;\n          }\n\n          this.toastr.success('Added to the car', 'Success');\n        }\n      });\n    }\n\n    openDialogDeleteOfCar(data, quantity, index) {\n      const dialogRef = this.dialog.open(RetailSellerProductsDialogDeleteComponent, {\n        data: {\n          product: data,\n          quantity: quantity\n        }\n      });\n      dialogRef.afterClosed().subscribe(result => {\n        if (result != undefined) {\n          if (this.senderService.shoppingCarOrders.find(x => x.productId == result.product.id).quantity == quantity) {\n            this.senderService.shoppingCarOrders = this.senderService.shoppingCarOrders.filter(x => x.productId != result.product.id);\n            this.productsQuantity[index] = 0;\n          } else {\n            this.senderService.shoppingCarOrders.find(x => x.productId == result.product.id).quantity -= quantity;\n            this.productsQuantity[index] -= quantity;\n          } //this.productsData.find(x=>x.id==result.id)!.canAddToCar=true;\n\n\n          this.toastr.success('Deleted from the car', 'Success');\n        }\n      });\n    }\n\n    slideToggleChange(event, product, index) {\n      if (!event.checked) {\n        if (this.senderService.shoppingCarOrders.find(x => x.productId == product.id)) {\n          this.sliderValue[index] = this.senderService.shoppingCarOrders.find(x => x.productId == product.id).quantity;\n          console.log(this.sliderValue[index]);\n        } else {\n          this.sliderValue[index] = 0;\n        }\n      } else {\n        if (this.sliderValue[index] == 0) {\n          this.sliderValue[index] = 1;\n        }\n      }\n    }\n\n  }\n\n  RetailSellerProductsComponent.ɵfac = function RetailSellerProductsComponent_Factory(t) {\n    return new (t || RetailSellerProductsComponent)(i0.ɵɵdirectiveInject(i1.BreakpointObserver), i0.ɵɵdirectiveInject(i2.ProductsService), i0.ɵɵdirectiveInject(i3.WholesalersService), i0.ɵɵdirectiveInject(i4.MatDialog), i0.ɵɵdirectiveInject(i5.RetailSellersService), i0.ɵɵdirectiveInject(i6.ActivatedRoute), i0.ɵɵdirectiveInject(i7.SenderService), i0.ɵɵdirectiveInject(i8.ToastrService));\n  };\n\n  RetailSellerProductsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: RetailSellerProductsComponent,\n    selectors: [[\"app-retail-seller-products\"]],\n    decls: 15,\n    vars: 6,\n    consts: [[1, \"everything\"], [1, \"grid-container\"], [1, \"header-container\"], [1, \"available_title\"], [1, \"mat-h1\"], [1, \"search\"], [\"appearance\", \"fill\"], [1, \"name_search\"], [\"matInput\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"cols\", \"2\", \"rowHeight\", \"450px\"], [4, \"ngFor\", \"ngForOf\"], [1, \"dashboard-card\"], [1, \"name_of_product\"], [1, \"dashboard-card-content\"], [1, \"product-data\"], [4, \"ngIf\"], [1, \"about-add\"], [1, \"product-form\"], [\"appearance\", \"fill\", 1, \"value-form\"], [\"matInput\", \"\", \"type\", \"number\", 1, \"input-product\", 3, \"ngModel\", \"ngModelChange\"], [1, \"product-slider\"], [\"thumbLabel\", \"\", \"step\", \"1\", \"min\", \"0\", \"aria-label\", \"units\", 3, \"ngModel\", \"color\", \"max\", \"ngModelChange\"], [\"color\", \"primary\", 3, \"ngModel\", \"change\", \"ngModelChange\"], [1, \"buttons\"], [\"mat-raised-button\", \"\", \"color\", \"warn\", 3, \"disabled\", \"click\", 4, \"ngIf\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 3, \"disabled\", \"click\", 4, \"ngIf\"], [\"mat-raised-button\", \"\", \"color\", \"warn\", 3, \"disabled\", \"click\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 3, \"disabled\", \"click\"]],\n    template: function RetailSellerProductsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"app-retail-seller-navbar\");\n        i0.ɵɵelementStart(1, \"div\", 0)(2, \"div\", 1)(3, \"div\", 2)(4, \"div\", 3)(5, \"h1\", 4);\n        i0.ɵɵtext(6, \"Available Products\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(7, \"div\", 5)(8, \"mat-form-field\", 6)(9, \"mat-label\", 7);\n        i0.ɵɵtext(10, \"Search\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"input\", 8);\n        i0.ɵɵlistener(\"ngModelChange\", function RetailSellerProductsComponent_Template_input_ngModelChange_11_listener($event) {\n          return ctx.searchKey = $event;\n        });\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(12, \"mat-grid-list\", 9);\n        i0.ɵɵtemplate(13, RetailSellerProductsComponent_mat_grid_tile_13_Template, 49, 15, \"mat-grid-tile\", 10);\n        i0.ɵɵpipe(14, \"filter\");\n        i0.ɵɵelementEnd()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(11);\n        i0.ɵɵproperty(\"ngModel\", ctx.searchKey);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind3(14, 2, ctx.productsData, ctx.searchKey, \"name\"));\n      }\n    },\n    directives: [i9.RetailSellerNavbarComponent, i10.MatFormField, i10.MatLabel, i11.MatInput, i12.DefaultValueAccessor, i12.NgControlStatus, i12.NgModel, i13.MatGridList, i14.NgForOf, i13.MatGridTile, i15.MatCard, i15.MatCardHeader, i15.MatCardTitle, i15.MatCardContent, i14.NgIf, i12.NumberValueAccessor, i16.MatSlider, i17.MatSlideToggle, i18.MatButton],\n    pipes: [i19.FilterPipe],\n    styles: [\"@import\\\"https://fonts.googleapis.com/css2?family=Comfortaa:wght@700&display=swap\\\";.grid-container[_ngcontent-%COMP%]{padding:20px;background-color:#b3b3ff}.dashboard-card[_ngcontent-%COMP%]{position:absolute;top:15px;left:15px;right:15px;bottom:15px}.more-button[_ngcontent-%COMP%]{position:absolute;top:5px;right:10px}.product-data[_ngcontent-%COMP%]{text-align:left;padding:0rem 3rem 1rem}.name_of_product[_ngcontent-%COMP%]{padding:1rem 0rem 0rem 2rem}.mat-h1[_ngcontent-%COMP%], .name_search[_ngcontent-%COMP%]{color:#fff}.value-form[_ngcontent-%COMP%]{padding-left:3rem;width:8rem}.input-product[_ngcontent-%COMP%]{width:4rem}span[_ngcontent-%COMP%]{color:#673ab7}.product-form[_ngcontent-%COMP%], .product-slider[_ngcontent-%COMP%]{float:left}.header-container[_ngcontent-%COMP%]{display:flex}.available_title[_ngcontent-%COMP%]{width:50%;margin:1rem 0rem 0rem 1rem}.search[_ngcontent-%COMP%]{width:50%;margin:0rem 1rem 0rem 0rem;text-align:right}.buttons[_ngcontent-%COMP%]{text-align:center}  .mat-slide-toggle:not(.mat-checked):not(.mat-disabled) .mat-slide-toggle-bar{background-color:#f99992}  .mat-slide-toggle:not(.mat-checked):not(.mat-disabled) .mat-slide-toggle-thumb{background-color:#f44336}.dashboard-card[_ngcontent-%COMP%]{border-radius:1rem}\"]\n  });\n  return RetailSellerProductsComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}