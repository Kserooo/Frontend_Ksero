{"ast":null,"code":"import { RetailSellerShoppingCarDialogSubmitComponent } from \"./retail-seller-shopping-car-dialog-submit/retail-seller-shopping-car-dialog-submit.component\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../services/products/products.service\";\nimport * as i3 from \"../../services/wholesaler-orders/wholesaler-orders.service\";\nimport * as i4 from \"../../sender.service\";\nimport * as i5 from \"@angular/material/dialog\";\nimport * as i6 from \"ngx-toastr\";\nimport * as i7 from \"../retail-seller-navbar/retail-seller-navbar.component\";\nimport * as i8 from \"@angular/material/card\";\nimport * as i9 from \"@angular/material/grid-list\";\nimport * as i10 from \"@angular/common\";\nimport * as i11 from \"@angular/material/button\";\n\nfunction RetailSellerShoppingCarComponent_mat_card_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-card\", 7)(1, \"mat-card-content\", 10)(2, \"div\", 11);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 12);\n    i0.ɵɵtext(5);\n    i0.ɵɵelement(6, \"br\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelement(8, \"br\");\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const product_r1 = ctx.$implicit;\n    const i_r2 = ctx.index;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Product Name: \", product_r1.name, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Product Price: \", product_r1.price, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" Product Quantity: \", ctx_r0.shoppingCarOrder[i_r2].quantity, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" Product Total Price: \", product_r1.price * ctx_r0.shoppingCarOrder[i_r2].quantity, \"\");\n  }\n}\n\nexport let RetailSellerShoppingCarComponent = /*#__PURE__*/(() => {\n  class RetailSellerShoppingCarComponent {\n    constructor(route, productsService, wholesalerOrdersService, senderService, dialog, toastr) {\n      this.route = route;\n      this.productsService = productsService;\n      this.wholesalerOrdersService = wholesalerOrdersService;\n      this.senderService = senderService;\n      this.dialog = dialog;\n      this.toastr = toastr;\n      this.id = this.route.snapshot.paramMap.get('id');\n      this.orderActual = {};\n      this.shoppingCarOrder = [];\n      this.productsData = [];\n      this.sumProducts = 0;\n    }\n\n    ngOnInit() {\n      this.retrieveData();\n    }\n\n    retrieveData() {\n      this.productsData = [];\n      this.sumProducts = 0;\n      this.shoppingCarOrder = this.senderService.shoppingCarOrders;\n\n      for (let order of this.senderService.shoppingCarOrders) {\n        this.productsService.getById(order.productId).subscribe(response => {\n          this.productsData.push(response);\n          this.sumProducts += response.price * order.quantity;\n        });\n      }\n    }\n\n    openDialogSubmit() {\n      if (this.productsData.length > 0) {\n        const dialogRef = this.dialog.open(RetailSellerShoppingCarDialogSubmitComponent, {\n          data: this.sumProducts\n        });\n        dialogRef.afterClosed().subscribe(result => {\n          if (result != undefined) {\n            let i = 0;\n\n            for (let product of this.productsData) {\n              this.orderActual.id = 0;\n              this.orderActual.retailSellerId = Number(this.id);\n              this.orderActual.productId = product.id;\n              this.orderActual.quantity = this.shoppingCarOrder[i].quantity;\n              this.wholesalerOrdersService.create(this.orderActual).subscribe(response => {\n                this.toastr.success('Order Submitted', 'Success');\n              });\n              i++;\n            }\n\n            this.senderService.shoppingCarOrders = [];\n            this.retrieveData();\n          }\n        });\n      } else {\n        this.toastr.error('Please first add some products to the car', 'Error');\n      }\n    }\n\n  }\n\n  RetailSellerShoppingCarComponent.ɵfac = function RetailSellerShoppingCarComponent_Factory(t) {\n    return new (t || RetailSellerShoppingCarComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.ProductsService), i0.ɵɵdirectiveInject(i3.WholesalerOrdersService), i0.ɵɵdirectiveInject(i4.SenderService), i0.ɵɵdirectiveInject(i5.MatDialog), i0.ɵɵdirectiveInject(i6.ToastrService));\n  };\n\n  RetailSellerShoppingCarComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: RetailSellerShoppingCarComponent,\n    selectors: [[\"app-retail-seller-shopping-car\"]],\n    decls: 21,\n    vars: 2,\n    consts: [[1, \"general-card\"], [1, \"container\"], [1, \"order\"], [1, \"tittles\"], [\"cols\", \"2\", \"rowHeight\", \"350px\"], [\"class\", \"card-order\", 4, \"ngFor\", \"ngForOf\"], [1, \"payment-summary\"], [1, \"card-order\"], [1, \"p-general-2\"], [\"mat-button\", \"\", 3, \"click\"], [1, \"card-order-content\"], [1, \"p-name\"], [1, \"p-price\"]],\n    template: function RetailSellerShoppingCarComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"app-retail-seller-navbar\");\n        i0.ɵɵelementStart(1, \"mat-card\", 0)(2, \"mat-card-title\");\n        i0.ɵɵtext(3, \"Shopping car\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"mat-card-content\")(5, \"div\", 1)(6, \"div\", 2)(7, \"p\", 3);\n        i0.ɵɵtext(8, \"Order\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"mat-grid-list\", 4);\n        i0.ɵɵtemplate(10, RetailSellerShoppingCarComponent_mat_card_10_Template, 10, 4, \"mat-card\", 5);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(11, \"div\", 6)(12, \"p\", 3);\n        i0.ɵɵtext(13, \"Payment Summary\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"mat-card\", 7)(15, \"mat-card-content\")(16, \"div\", 8);\n        i0.ɵɵtext(17);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(18, \"mat-card-actions\")(19, \"button\", 9);\n        i0.ɵɵlistener(\"click\", function RetailSellerShoppingCarComponent_Template_button_click_19_listener() {\n          return ctx.openDialogSubmit();\n        });\n        i0.ɵɵtext(20, \"Proceed to pay\");\n        i0.ɵɵelementEnd()()()()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(10);\n        i0.ɵɵproperty(\"ngForOf\", ctx.productsData);\n        i0.ɵɵadvance(7);\n        i0.ɵɵtextInterpolate1(\"Sum of products: \", ctx.sumProducts, \"\");\n      }\n    },\n    directives: [i7.RetailSellerNavbarComponent, i8.MatCard, i8.MatCardTitle, i8.MatCardContent, i9.MatGridList, i10.NgForOf, i8.MatCardActions, i11.MatButton],\n    styles: [\".general-card[_ngcontent-%COMP%]{height:100%;background-color:#b3b3ff}.container[_ngcontent-%COMP%]{padding-left:5%;padding-top:20px;display:flex;font-family:Confortaa,cursive}.order[_ngcontent-%COMP%]{margin-top:10px;border-radius:5px;background-color:#fff0f5;width:55%;height:250px;font-family:Confortaa,cursive}.payment-summary[_ngcontent-%COMP%]{margin-top:10px;margin-left:5%;border-radius:5px;background-color:#fff0f5;width:35%;height:250px;font-family:Confortaa,cursive}.tittles[_ngcontent-%COMP%]{padding-left:20px;padding-top:10px}.container2[_ngcontent-%COMP%]{padding-left:5%;padding-top:20px;display:flex;font-family:Confortaa,cursive}.delivery[_ngcontent-%COMP%]{margin-top:10px;border-radius:5px;background-color:#fff0f5;width:55%;height:200px}.aditional-services[_ngcontent-%COMP%]{margin-top:10px;margin-left:5%;border-radius:5px;background-color:#fff0f5;width:35%;height:200px}.card-order[_ngcontent-%COMP%]{margin:10px}.card-order-content[_ngcontent-%COMP%]{display:flex}.p-name[_ngcontent-%COMP%]{margin-left:10px;font-family:Confortaa,cursive}.p-price[_ngcontent-%COMP%]{margin-left:40%;font-family:Confortaa,cursive}.p-general-2[_ngcontent-%COMP%]{font-family:Confortaa,cursive}.mat-button[_ngcontent-%COMP%]{left:30%;font-family:Confortaa,cursive;background-color:#673ab7;color:#fff}\"]\n  });\n  return RetailSellerShoppingCarComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}